<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Growth Hub</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <script type="module" src="{{ url_for('static', filename='js/script.js') }}"></script>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

    <header class="glass-header">
        <div class="user-profile">
            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="User" id="header-pfp">
            <div class="user-details">
                <span id="username">Loading...</span>
                <span class="rank-badge">Rank #<span id="user-rank">...</span></span>
            </div>
        </div>
        <div class="coin-display">
            <i class="fas fa-coins text-gold"></i>
            <span id="header-coins">0</span>
        </div>
    </header>

    <main id="main-content">
        <section id="tab-hub" class="active-section fade-in">
            <div class="glass-card mb-20">
                <div class="section-title"><i class="fas fa-fire"></i> Your Progress</div>
                <div class="progress-bar-bg">
                    <div id="daily-progress" class="progress-fill" style="width: 0%;"></div>
                </div>
                <p class="small-text text-muted mt-5">Referral Tier: <span id="ref-tier">Starter</span></p>
            </div>

            <div class="section-header">
                <h3><i class="fas fa-tv text-gold"></i> Watch & Earn</h3>
                <span class="tag">500 Coins</span>
            </div>
            <div class="ad-grid">
                <div class="glass-card ad-card" id="btn-ad-1">
                    <div class="ad-icon"><i class="fas fa-play"></i></div>
                    <span>Server 1</span>
                </div>
                <div class="glass-card ad-card" id="btn-ad-2">
                    <div class="ad-icon"><i class="fas fa-play"></i></div>
                    <span>Server 2</span>
                </div>
            </div>

            <div class="section-header mt-20">
                <h3><i class="fab fa-telegram text-blue"></i> Premium Channels</h3>
                <span class="tag">1000 Coins</span>
            </div>
            <div id="channel-list" class="channel-grid"></div>
        </section>

        <section id="tab-games" class="fade-in hidden">
            <div class="section-header">
                <h3><i class="fas fa-gamepad text-purple"></i> Game Zone</h3>
                <span class="tag">Ad Boost</span>
            </div>
            <div class="games-grid">
                <div class="game-card" id="game-subway">
                    <img src="https://img.gamedistribution.com/rvvASMiM/512x512.jpg">
                    <div class="game-info"><h4>Subway Run</h4><span class="reward-tag">+100 Coins</span></div>
                </div>
                <div class="game-card" id="game-temple">
                    <img src="https://img.gamedistribution.com/6817/512x512.jpg">
                    <div class="game-info"><h4>Tomb Runner</h4><span class="reward-tag">+100 Coins</span></div>
                </div>
                <div class="game-card" id="game-ludo">
                    <img src="https://img.gamedistribution.com/5d2d480922834b6e9273574221c54848/512x512.jpeg">
                    <div class="game-info"><h4>Ludo Legend</h4><span class="reward-tag">+100 Coins</span></div>
                </div>
            </div>
        </section>

        <section id="tab-profile" class="fade-in hidden">
            <div class="profile-header glass-card center-text">
                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="large-pfp">
                <h2 id="profile-name">User</h2>
                <span class="rank-badge">Global Rank: #<span id="profile-rank">999</span></span>
            </div>
            
            <div class="wallet-card glass-card">
                <h3>Total Balance</h3>
                <h1 id="wallet-coins">0</h1>
                <p>≈ ₹<span id="wallet-fiat">0.00</span> INR</p>
                <input type="text" id="upi-id" class="glass-input" placeholder="Enter UPI ID">
                <button class="btn-success w-100 mt-10" id="btn-withdraw">Withdraw</button>
                <p id="withdraw-msg" class="small-text mt-10"></p>
            </div>

            <div class="glass-card mt-20">
                <div class="section-title flex-between">
                    <span><i class="fas fa-trophy text-gold"></i> Top 100 Leaderboard</span>
                </div>
                <div id="leaderboard-list">Loading...</div>
            </div>

            <div class="glass-card mt-20">
                <div class="section-title">Referral Link</div>
                <div class="glass-input mt-10 flex-between pointer" id="btn-copy-ref">
                    <span id="my-ref-link">Generating...</span> <i class="fas fa-copy"></i>
                </div>
                <p class="small-text mt-5">Share to earn up to 6000 Coins!</p>
            </div>
        </section>
    </main>

    <nav class="glass-nav">
        <div class="nav-item active" id="nav-hub"><i class="fas fa-home"></i><span>Hub</span></div>
        <div class="nav-item" id="nav-games"><i class="fas fa-gamepad"></i><span>Games</span></div>
        <div class="nav-item" id="nav-profile"><i class="fas fa-user"></i><span>Profile</span></div>
    </nav>

    <div id="game-overlay" class="hidden">
        <button class="close-game-btn" id="btn-close-game">Exit Game</button>
        <iframe id="game-frame" src="" frameborder="0"></iframe>
    </div>

    <script>const AD_LINK = "{{ ad_link }}";</script>
</body>
</html>
